-- Egg Refresher GUI (Orange + Black 4x4)

local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

local gui = nil
local systemRunning = false
local minimized = false
local timerLabel

-- Create UI
local function createUI()
    gui = Instance.new("ScreenGui", PlayerGui)
    gui.Name = "EggRefresherUI"

    -- Main Frame
    local mainFrame = Instance.new("Frame", gui)
    mainFrame.Size = UDim2.new(0, 400, 0, 300)
    mainFrame.Position = UDim2.new(0.5, -200, 0.5, -150)
    mainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    mainFrame.BorderSizePixel = 0
    mainFrame.Active = true
    mainFrame.Draggable = true
    Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0, 12)

    -- Title Bar
    local titleBar = Instance.new("Frame", mainFrame)
    titleBar.Size = UDim2.new(1, 0, 0, 40)
    titleBar.BackgroundColor3 = Color3.fromRGB(255, 120, 0)
    Instance.new("UICorner", titleBar).CornerRadius = UDim.new(0, 12)

    local title = Instance.new("TextLabel", titleBar)
    title.Size = UDim2.new(1, -40, 1, 0)
    title.Position = UDim2.new(0, 10, 0, 0)
    title.BackgroundTransparency = 1
    title.Text = "ü•ö Egg Refresher"
    title.Font = Enum.Font.GothamBold
    title.TextScaled = true
    title.TextColor3 = Color3.fromRGB(255, 255, 255)

    -- Minimize Button ("-")
    local minimizeButton = Instance.new("TextButton", titleBar)
    minimizeButton.Size = UDim2.new(0, 40, 1, 0)
    minimizeButton.Position = UDim2.new(1, -40, 0, 0)
    minimizeButton.BackgroundColor3 = Color3.fromRGB(200, 100, 0)
    minimizeButton.Text = "-"
    minimizeButton.Font = Enum.Font.GothamBold
    minimizeButton.TextScaled = true
    minimizeButton.TextColor3 = Color3.new(1,1,1)
    Instance.new("UICorner", minimizeButton).CornerRadius = UDim.new(0, 12)

    -- 4x4 Grid Layout
    local grid = Instance.new("UIGridLayout", mainFrame)
    grid.CellSize = UDim2.new(0, 90, 0, 60)
    grid.CellPadding = UDim2.new(0, 5, 0, 5)
    grid.FillDirectionMaxCells = 4
    grid.HorizontalAlignment = Enum.HorizontalAlignment.Center
    grid.VerticalAlignment = Enum.VerticalAlignment.Center
    grid.SortOrder = Enum.SortOrder.LayoutOrder
    grid.Padding = UDim.new(0, 10)

    -- Timer Label
    timerLabel = Instance.new("TextLabel", mainFrame)
    timerLabel.Size = UDim2.new(0, 380, 0, 40)
    timerLabel.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    timerLabel.TextColor3 = Color3.fromRGB(255, 180, 0)
    timerLabel.Font = Enum.Font.GothamBold
    timerLabel.TextScaled = true
    timerLabel.Text = "‚úî Ready to Shuffle"
    Instance.new("UICorner", timerLabel).CornerRadius = UDim.new(0, 8)

    -- Shuffle Button
    local shuffleButton = Instance.new("TextButton", mainFrame)
    shuffleButton.BackgroundColor3 = Color3.fromRGB(255, 100, 0)
    shuffleButton.Text = "üîÅ Shuffle Pets"
    shuffleButton.Font = Enum.Font.GothamBold
    shuffleButton.TextScaled = true
    shuffleButton.TextColor3 = Color3.new(1, 1, 1)
    Instance.new("UICorner", shuffleButton).CornerRadius = UDim.new(0, 8)
    shuffleButton.MouseButton1Click:Connect(startCooldown)

    -- Freeze Sprinklers Button
    local sprinklerButton = Instance.new("TextButton", mainFrame)
    sprinklerButton.BackgroundColor3 = Color3.fromRGB(255, 140, 40)
    sprinklerButton.Text = "üíß Freeze Sprinklers"
    sprinklerButton.Font = Enum.Font.GothamBold
    sprinklerButton.TextScaled = true
    sprinklerButton.TextColor3 = Color3.new(1, 1, 1)
    Instance.new("UICorner", sprinklerButton).CornerRadius = UDim.new(0, 8)
    sprinklerButton.MouseButton1Click:Connect(freezeSprinklers)

    -- Minimize Function
    minimizeButton.MouseButton1Click:Connect(function()
        minimized = not minimized
        for _, child in ipairs(mainFrame:GetChildren()) do
            if child ~= titleBar then
                child.Visible = not minimized
            end
        end
    end)
end

-- Toggle GUI
local toggleGui = Instance.new("ScreenGui", PlayerGui)
local toggleButton = Instance.new("TextButton", toggleGui)
toggleButton.Size = UDim2.new(0, 160, 0, 40)
toggleButton.Position = UDim2.new(1, -180, 0.45, 0)
toggleButton.BackgroundColor3 = Color3.fromRGB(255, 140, 0)
toggleButton.TextColor3 = Color3.new(1,1,1)
toggleButton.Font = Enum.Font.GothamBold
toggleButton.TextScaled = true
toggleButton.Text = "ü•ö Toggle Hub"
Instance.new("UICorner", toggleButton).CornerRadius = UDim.new(0, 12)

toggleButton.MouseButton1Click:Connect(function()
    systemRunning = not systemRunning
    if not gui then createUI() end
    gui.Enabled = systemRunning
    if systemRunning then
        scanEggs()
    end
end)
